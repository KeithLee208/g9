<!DOCTYPE html>
<html>
<head>
    <title>g9 Gallery | Automatically Interactive Graphics</title>
    <meta name="viewport" content="width=device-width">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.18.2/codemirror.min.css">
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.18.2/addon/edit/matchbrackets.js"></script> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.18.2/theme/solarized.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism-solarizedlight.min.css">

    <link rel="stylesheet" type="text/css" href="https://antimatter15.com/style/temp/test.css">
    <link rel="stylesheet" type="text/css" href="../main.css">
    <link rel="stylesheet" type="text/css" href="./gallery.css">


</head>
<body class='language-js'>

<a href="https://github.com/bijection/g9" id='github'><img style="width: 150px; position: absolute; top: 0; right: 0; border: 0;" src="../github.png" alt="Spoon me on GitHub" ></a>


<div class='page'>
    <div class='header'>
        <a href="../"><div class='splash'>
            g9.js
        </div></a>
        <div class='tagline'>automatically interactive graphics</div>

        <!-- <div class='npm'>Getting Started</div> -->
        <div class='nav-wrap'>
            <a href='../#installation' class='nav'>Get Started</a>
            <a href='./' class='nav'>Examples</a>
            <a href='https://github.com/bijection/g9#docs' class='nav'>Docs</a>
        </div>        
    </div>

    <p>Welcome to the g9 gallery! <b>Drag all the graphics!</b></p>
    <p>I've tried to organize stuff from basic to advanced, so you can scroll from the top to get an intuitive feel for g9. It's worth mentioning, of course, that intuitive feeling is no match for <a href='https://github.com/bijection/g9#docs'>reading the docs</a>.</p>

    <p>Before you dive in, here's a brief explanation of how g9 works (scroll down to skip):</p>


    <h2>How It Works</h2>
    <p>
    g9.js exposes a single function, <a href="https://github.com/bijection/g9#g9initialdata-render-onrender-g9canvas"><span class='literal'>g9(initialData, render[, onChange])</span></a>. This represents the following flow: 
    <ol>
    
    <li>
        You create some initial data as key-value pairs with numeric values. For example:
<pre><code>var initialData = {
    foo: 10
}</code></pre>
    <a href='https://github.com/bijection/g9#initialdata'>initialData in the docs</a>
    </li>

    <li>
        This data and a drawing context are fed into a function that uses the data to decide what to draw.
<pre><code>function render(data, ctx){
    ctx.point(data.foo, 17)
}</code></pre>
    <a href='https://github.com/bijection/g9#renderdata-ctx-g9context'>render in the docs</a>
    </li>
    
    <li>When someone interacts with the graphics, for example by trying to drag an element to a new position, g9 optimizes over the space of possible values for your data to find a set of values that comes closest to creating the change. If you tried to drag the circle to the left, g9 might come up with the new data <span class='literal'>{foo: 8 }</span>.</li>
    
    <li>g9 rerenders the entire scene with the new data, so that everything is consistent. If you've provided one, g9 calls your <span class='literal'>onChange</span> callback with the new data, so you can update other parts of your page.</li>
    
    </ol>
    </p>
    <p>For a complete treatment of the g9 API, <a href="https://github.com/bijection/g9#docs">head to the Docs</a>.</p>



    <!-- <p>In order to avoid repetion, every example gets a special function <span class='literal'>_special_log</span> that shows its arguments in a floating box.</p> -->



</div>











<div class='page'>
<h1>Basic</h1>
<p>A minimal example with only two points. Our render function always draws one point at (x, y), and the other point at (y, x), so when you drag one of the points, the other kind of mirrors it. Try adding a minus sign before the first argument of the first point. What happens?</p>
</div>

<div class='gallery-wrap'>
    <div class='input'>
        <div class='run-button'>Run</div>
        <textarea class='user'>
var initialData = {
    x: 10,
    y: 0
}

var render = function(data, ctx){
    ctx.point(data.x, data.y)
    ctx.point(data.y, data.x)
}         

g9(initialData, render)
    .align('center', 'center')
    .insertInto('#demo-basic')</textarea>
    </div>
    <div class='display' id='demo-basic'></div>
</div>















<div class='page'>
<h1>Rings</h1>
<p>Lets add a few more points and use a bit or trigonometry to arrange them into two circles. Just for fun, we make the inner points red. Try dragging the points!</p>
</div>

<div class='gallery-wrap'>
    <div class='input'>
        <div class='run-button'>Run</div>
        <textarea class='user'>
var initialData = {
    radius: 100,
    angle: 0
}

function render(data, ctx){
    var sides = 10
    for(var i=0; i&lt;sides; i++){
        var a = data.angle + i/sides * Math.PI * 2
        var r1 = data.radius
        var r2 = r1/2
        ctx.point(r1 * Math.cos( a), r1 * Math.sin( a))
        ctx.point(r2 * Math.cos(-a), r2 * Math.sin(-a), {fill: 'red'})

        /* uncomment this following line to make this
           drawing more exciting! */

        /*ctx.line(r1 * Math.cos( a), r1 * Math.sin( a),
                   r2 * Math.cos(-a), r2 * Math.sin(-a)) */

    }
}         

g9(initialData, render)
    .align('center', 'center')
    .insertInto('#demo-rings')</textarea>
    </div>
    <div class='display' id='demo-rings'></div>
</div>













<div class='page'>
<h1>The affects option</h1>
<p>All of the default shapes in g9 accept an <span class='literal'>affects</span> option, which tells them what parts of the data they can change. Here are three lines with different values of <span class='literal'>affects</span>.</p>
</div>

<div class='gallery-wrap'>
    <div class='input'>
        <div class='run-button'>Run</div>
        <textarea class='user'>
var initialData = {
    l1_start_x: -100,
    l1_start_y: -50,
    l1_end_x: 100,
    l1_end_y: -50,

    l2_start_x: -100,
    l2_start_y: 0,
    l2_end_x: 100,
    l2_end_y: 0,

    l3_start_x: -100,
    l3_start_y: 50,
    l3_end_x: 100,
    l3_end_y: 50,
}

var render = function(data, ctx){
    ctx.line(data.l1_start_x, data.l1_start_y,
             data.l1_end_x,   data.l1_end_y,
             {'stroke-width': 10})

    // if we provide an `affects` option, this
    // line will only change the parameters we name.
    ctx.line(data.l2_start_x, data.l2_start_y,
             data.l2_end_x,   data.l2_end_y, {
        affects: ['l2_start_x', 'l2_start_y'],
        stroke: 'red',
        'stroke-width': 10
    })

    ctx.line(data.l3_start_x, data.l3_start_y,
             data.l3_end_x,   data.l3_end_y, {
        affects: ['l3_start_x', 'l3_end_y'],
        'stroke':'blue',
        'stroke-width': 10
    })
}         

g9(initialData, render)
    .align('center', 'center')
    .insertInto('#demo-lines')</textarea>
    </div>
    <div class='display' id='demo-lines'></div>
</div>









 





<div class='page'>
<h1>Bézier Curve</h1>
<p>Here's an interactive version of the quadratic bézier curve animation on <a href="https://en.wikipedia.org/wiki/B%C3%A9zier_curve#Quadratic_curves">the bézier curve wikipedia page</a>.</p>
</div>

<div class='gallery-wrap'>
    <div class='input'>
        <div class='run-button'>Run</div>
        <textarea class='user'>
 var initialData = {
    endx: 189.99999999995265,
    endy: 76.99999999995309,
    middlex: 9.000000002109623,
    middley: -223.99999999996237,
    startx: -139.9999999999726,
    starty: 81.99999999698782,
    t: 0.5066666666666662,
}


function render(data, ctx){

    var endx = data.endx,
        endy = data.endy,
        middlex = data.middlex,
        middley = data.middley,
        startx = data.startx,
        starty = data.starty,
        width = ctx.width,
        height = ctx.height,
        t = data.t;

    var tlabel = 'tween='+t.toString().slice(0,4)
    ctx.text(tlabel, (t- .5)*300, height/2 - 30, {alignmentBaseline: "middle"})

    var steps = 30
    var smooth = []

    for (var i = 0; i < steps; i++) {
        var r = t*i/steps

        function tween(a,b){
            return a + r*(b-a)
        }

        var ax = tween(startx, middlex),
            ay = tween(starty, middley),
            bx = tween(middlex, endx),
            by = tween(middley, endy);
        

        ctx.line(ax, ay, bx, by, {affects: ['t'], stroke:'rgba(0,0,0,.1)'})
        smooth.push([tween(ax,bx), tween(ay,by)])
    }

    var p = smooth[0]
    for (var i = 1; i < smooth.length; i++) {
        ctx.line(p[0], p[1], smooth[i][0], smooth[i][1], {affects: ['t'], 'stroke-width': 5})
        p = smooth[i]
    }

    ctx.line(startx,starty, middlex,middley)
    ctx.line(middlex,middley, endx,endy)

    ctx.point(startx,starty)
    ctx.point(middlex,middley)
    ctx.point(endx,endy)

}


g9(initialData, render) 
    .align('center', 'center')
    .insertInto('#demo-bezier')</textarea>
    </div>
    <div class='display' id='demo-bezier'></div>
</div> 



<div class='page'>
<h1>Three points define a circle</h1>
</div>

<div class='gallery-wrap'>
    <div class='input'>
        <div class='run-button'>Run</div>
        <textarea class='user'>
 var data = {
    x1: 100,
    y1: 100,
    x2: -100,
    y2: 100,
    x3: 0,
    y3: -50,
}

function invert(m){
    var [[a,b], [c,d]] = m
    var det = a*d - b*c
    return [[d/det, -b/det], [-c/det, a/det]]
}

function multiply(A, x){
    var [[a,b], [c,d]] = A
    var [x, y] = x
    return [a*x + b*y, c*x+d*y]
}


function render(data, ctx){
    
    var mx1 = (data.x1 + data.x2)/2
    var my1 = (data.y1 + data.y2)/2
    var dy1 = data.y1 - data.y2
    var dx1 = -(data.x1 - data.x2)

    var mx2 = (data.x3 + data.x2)/2
    var my2 = (data.y3 + data.y2)/2
    var dy2 = data.y2 - data.y3
    var dx2 = -(data.x2 - data.x3)

    var I = invert([[dy1, -dy2], 
                    [dx1, -dx2]])
    var [a,b] = multiply(I, [mx2-mx1, my2-my1])

    ctx.line(
        data.x1,
        data.y1,
        data.x2,
        data.y2,
        {stroke: 'red'})

    ctx.line(
        data.x3,
        data.y3,
        data.x2,
        data.y2,
        {stroke: 'blue'})

    ctx.line(
        mx1,
        my1,
        mx1 + 2 * a * dy1,
        my1 + 2 * a * dx1,
        {stroke: 'red'})

    ctx.line(
        mx2,
        my2,
        mx2 + 2 * b * dy2,
        my2 + 2 * b * dx2,
        {stroke: 'blue'})

    var cx = mx1 + a*dy1
    var cy = my1 + a*dx1

    var dx = cx - data.x1
    var dy = cy - data.y1

    ctx.point(cx, cy)

    ctx.circle(cx, cy, Math.sqrt(dx*dx + dy*dy), {
        fill: 'none',
        stroke: 'green',
        'stroke-width': 3
    })
    ctx.point(data.x1, data.y1)
    ctx.point(data.x2, data.y2)

    ctx.point(data.x3, data.y3)
}

var demo = g9(data, render) 
  .align('center', 'center')
    .insertInto('#demo-point')</textarea>
    </div>
    <div class='display' id='demo-point'></div>
</div> 




<div class='page'>
<h1>cube</h1>
</div>

<div class='gallery-wrap'>
    <div class='input'>
        <div class='run-button'>Run</div>
        <textarea class='user'>
'use strict';

var initial = {
    az: 0,
    ax: 0,
    ay: 0,
    ez: 1,
    ex: 100,
    ey: 100
};

var sin = Math.sin,
    cos = Math.cos;

function mul(m, v) {
    return m.map(function (row) {
        return row.reduce(function (a, b, i) {
            return a + b * v[i];
        }, 0);
    });
}

function rx(v, theta) {
    return mul([[1, 0, 0], [0, cos(theta), -sin(theta)], [0, sin(theta), cos(theta)]], v);
}

function ry(v, theta) {
    return mul([[cos(theta), 0, sin(theta)], [0, 1, 0], [-sin(theta), 0, cos(theta)]], v);
}

function rz(v, theta) {
    return mul([[cos(theta), -sin(theta), 0], [sin(theta), cos(theta), 0], [0, 0, 1]], v);
}

function rotate(v, ax, ay, az) {
    return rx(ry(rz(v, az), ay), ax);
}

function translate(p, dx, dy, dz) {
    return [p[0] + dx, p[1] + dy, p[2] + dz];
}

function project(p) {
    return [300 * p[0] / p[2], 300 * p[1] / p[2]];
}

console.log(project);

// mul([[1,0,0],[1,2,0],[0,0,1]], [1,2,3])

// function rotate(x,y,z, ){
//     return [Math.cos(a)*x - Math.sin(a)*y, Math.sin(a)*x + Math.cos(a)*y]
// }

var points = [];
for (var x = 0; x < 2; x++) {
    for (var y = 0; y < 2; y++) {
        for (var z = 0; z < 2; z++) {
            points.push([x - .5, y - .5, z - .5]);
        }
    }
}

console.log(points);

var edges = [];

for (var i = 0; i < points.length; i++) {
    var pi = points[i];
    for (var j = i + 1; j < points.length; j++) {
        var pj = points[j];
        if (pi.reduce(function (a, c, k) {
            return a + (c != pj[k]);
        }, 0) === 1) {
            edges.push([pi, pj]);
        }
    }
}

function render(data, ctx) {
    var ax = data.ax,
        ay = data.ay,
        az = data.az;

    var drawedge = ctx.pure(function (ps) {
        var p1 = project(translate(rotate(ps[0], ax, ay, 0), 0, 0, 2));
        var p2 = project(translate(rotate(ps[1], ax, ay, 0), 0, 0, 2));
        ctx.line(p1[0], p1[1], p2[0], p2[1], {
            affects: ['ax', 'ay'],
            "stroke-width": 10,
            "stroke-linecap": "round"
        });
    });

    edges.forEach(drawedge);
}

function log(x) {
    console.log(x);
}

var demo = g9(initial, render, log).align('center', 'center').insertInto('#demo-cube');</textarea>
    </div>
    <div class='display' id='demo-cube'></div>
</div> 





<div class='page'>
<h1>dragon</h1>
</div>

<div class='gallery-wrap'>
    <div class='input'>
        <div class='run-button'>Run</div>
        <textarea class='user'>
 var data = {
    "squareness": 0.8,
    "fromX": 175,
    "fromY": 96,
    "toX": -220,
    "toY": 39
}

function render(data, ctx){
    var lineoptions = {
        'stroke-width': 4,
        'stroke-linecap':'round',
        affects:['squareness']
    }

    function dragon(x1,y1, x2,y2, dir, level){
        if(level == 0){
            ctx.line(x1, y1,x2, y2, lineoptions)
        } else {
            var midx = (x1 + x2 + data.squareness*dir*(y2 - y1))/2
            var midy = (y1 + y2 - data.squareness*dir*(x2 - x1))/2

            dragon(x1,y1, midx,midy, -1,level-1)
            dragon(midx,midy, x2,y2,  1,level-1)
        }
    }
    
    dragon = ctx.pure(dragon)
    
    dragon(data.fromX, data.fromY, data.toX, data.toY, -1, 9)
    
    ctx.point(data.fromX, data.fromY, {r:5})
    ctx.point(data.toX, data.toY, {r:5})
}

var demo = g9(data, render) 
  .align('center', 'center')
    .insertInto('#demo-dragon')</textarea>
    </div>
    <div class='display' id='demo-dragon'></div>
</div> 



<div class='page'>
<h1>image</h1>
</div>

<div class='gallery-wrap'>
    <div class='input'>
        <div class='run-button'>Run</div>
        <textarea class='user'>
var initial = {

    x: -100,
    y: -100

}

function render (data, ctx){
    ctx.image('http://i.imgur.com/LQIsf.jpg', data.x, data.y, 200, 200)        
}

g9(initial,render) 
    .align('center', 'center')
    .insertInto('#demo-image')</textarea>
    </div>
    <div class='display' id='demo-image'></div>
</div> 






<div class='page'>
<h1>tongs</h1>
</div>

<div class='gallery-wrap'>
    <div class='input'>
        <div class='run-button'>Run</div>
        <textarea class='user'>
var initial = {
    a: 18,
    b: 1,
}

function rotate(x,y, a){
    return [Math.cos(a)*x - Math.sin(a)*y, Math.sin(a)*x + Math.cos(a)*y]
}

function render(data, ctx){
    var x = 0, y1 = 0, y2 = -100*Math.sin(data.b)
    for (var i = 0; i < 4; i++) {

        var dir = (i%2)*2 - 1

        var nextx = x + 100*Math.cos(data.b)
        var nexty1 = y1 + dir*100*Math.sin(data.b)
        var nexty2 = y2 - dir*100*Math.sin(data.b)

        var r1 = rotate(x,y1,data.a), r2 = rotate(nextx,nexty1,data.a)
        var r3 = rotate(x,y2,data.a), r4 = rotate(nextx,nexty2,data.a)

        ctx.line(r1[0], r1[1], r2[0], r2[1], {"stroke-width":10, "stroke-linecap":"round"})
        ctx.line(r3[0], r3[1], r4[0], r4[1], {"stroke-width":10, "stroke-linecap":"round"})
        
        x = nextx
        y1 = nexty1
        y2 = nexty2

    }    
}   

function log(x){
    console.log(x)
}

var demo = g9(initial, render, log) 
    .align('center', 'center')
    .insertInto('#demo-tongs')</textarea>
    </div>
    <div class='display' id='demo-tongs'></div>
</div> 



<div class='page'>
<h1>tree</h1>
</div>

<div class='gallery-wrap'>
    <div class='input'>
        <div class='run-button'>Run</div>
        <textarea class='user'>
  var demo = g9({
    deltaAngle:33,
    attenuation:0.7,
    startLength:189
}, function({deltaAngle,attenuation,startLength}, ctx){
    
    var drawTree = ctx.pure(function (x1, y1, length, angle, n){
        var x2 = x1 + length * Math.cos(angle*Math.PI/180);
        var y2 = y1 + length * Math.sin(angle*Math.PI/180);
     
        ctx.point(x2, y2, {affects:['deltaAngle', 'attenuation'],
                          fill: 'green'})
        ctx.line(x1,y1,x2,y2, {'stroke-width': 5, 
                               stroke: n>3?'brown':'green',
                               affects:['deltaAngle', 'attenuation']})

        if(n > 0) {
            drawTree(x2, y2, length*attenuation, angle+deltaAngle, n-1);
            drawTree(x2, y2, length*attenuation, angle-deltaAngle, n-1);
        }

    })

    ctx.point(0, ctx.height/2 - 30)

    drawTree(0, ctx.height/2 - 30, startLength, -90, 8)

}, function(newdata, renderees){

    console.log('changed data to', newdata)

}).align('center', 'center')
    .insertInto('#demo-tree')</textarea>
    </div>
    <div class='display' id='demo-tree'></div>
</div> 



<div class='page'>
<h1>Using Max and Min to limit a point's range of motion.</h1>
</div>

<div class='gallery-wrap'>
    <div class='input'>
        <div class='run-button'>Run</div>
        <textarea class='user'>
 var initial = {
    x1: -100,
    x2: 0,
    x3: 100,
}

function render(data, ctx){
    var m = Math.max(Math.min(data.x2, data.x3 - 20), data.x1 + 20)
    ctx.point(m,0, {affects: ['x2']})
    ctx.point(data.x2,20, {affects: ['x2']})
    ctx.point(data.x1,0, {fill: 'red'})
    ctx.point(data.x3,0, {fill: 'red'})
}

function log(x, y){
    console.log(x,y)
}

var demo = g9(initial, render, log) 
  .align('center', 'center')
    .insertInto('#demo-zero_gradients')</textarea>
    </div>
    <div class='display' id='demo-zero_gradients'></div>
</div> 







<div class='page'>
<h1>Kevin Clock</h1>
<p>Try dragging the hands!</p>
</div>

<div class='gallery-wrap'>
    <div class='input'>
        <div class='run-button'>Run</div>
        <textarea class='user'>
var initial = {
    "time": 72
}

function render(data, ctx){
    var r = 100,
        m = 70;
    
    // minute hand
    ctx.line(0, 0, Math.cos(data.time / 60) * m, Math.sin(data.time / 60) * m, {
        'stroke-width': 10,
        'stroke-linecap': 'round',
        'stroke': 'gray'
    })
    
    // second hand
    ctx.line(0, 0, Math.cos(data.time) * r, Math.sin(data.time) * r, {
        'stroke-width': 10,
        'stroke-linecap': 'round'
    })
    
    ctx.circle(0, 0, { r: 120, fill: 'none', stroke: 'black' })
}

var graphics = g9(initial, render)
    .insertInto('#demo-clock')

setInterval(function(){
    if(!graphics.isManipulating){
        var data = graphics.getData()
        data.time += 0.01
        graphics.setData(data)
    }
}, 50)</textarea>
    </div>
    <div class='display' id='demo-clock'></div>
</div> 











<div class='page'>
<h1>LOGO Turtle simulator</h1>
</div>

<div class='gallery-wrap'>
    <div class='input'>
        <div class='run-button'>Run</div>
        <textarea class='user'>
var initial = {
    r: 20,
    theta: 123
}


function render(data, ctx){
    var t = make_turtle(ctx)
    for(var i = 0; i < 30; i++){
        t.forward(i * data.r, { 'stroke-width': 5 })
        t.dturn(data.theta)
    }
}


function make_turtle(ctx){
    var t = 0, x = 0, y = 0;
    return {
        turn: function(angle){ t += angle },
        dturn: function(deg){ t += deg / (180 / Math.PI)},
        forward: function(amount, options){
            var new_x = x + amount * Math.cos(t),
                new_y = y + amount * Math.sin(t);
            if(options) ctx.line(x, y, new_x, new_y, options);
            x = new_x; y = new_y;
        }
    }
}

g9(initial, render)
    .insertInto('#demo-star')</textarea>
    </div>
    <div class='display' id='demo-star'></div>
</div> 










<div class='page'>
<h1>Grid Warp</h1>
</div>

<div class='gallery-wrap'>
    <div class='input'>
        <div class='run-button'>Run</div>
        <textarea class='user'>
var initial = {
    "spin": 0,
    "scale": 1
}

function render(data, ctx){
    function warp(dx, dy){
        var r  = Math.sqrt(dx * dx + dy * dy)
        var theta = Math.atan2(dy, dx)
        return [
            data.scale * r * Math.cos(theta + data.spin * r),
            data.scale * r * Math.sin(theta + data.spin * r)
        ]
    }
    
    var drawWarpedPoint = ctx.pure(function(i, j){
        var out = warp(i, j)
        ctx.point(30 * out[0], 30 * out[1])
    })
    for(var i = -10; i <= 10; i++){
        for(var j = -10; j <= 10; j++){
            drawWarpedPoint(i, j)    
        }
    }
}

var graphics = g9(initial, render)
    .insertInto('#demo-warp')</textarea>
    </div>
    <div class='display' id='demo-warp'></div>
</div> 








<div class='page'>
<h1>Crank and Piston</h1>
<p>Try uncommenting the animation block for extra fun!</p>
</div>

<div class='gallery-wrap'>
    <div class='input'>
        <div class='run-button'>Run</div>
        <textarea class='user'>
var initial = {
    "time": 72
}

function render(data, ctx){
    var crank = 40;
    var shaft = 120
    
    // housing
    var fill = 'hsl('+ (Math.cos(data.time) * 60 + 300) +', 100%, 90%)'
    ctx.rect(-40, 0, 80, -235, { fill: fill, stroke: 'black' })
    ctx.circle(0, 0, { r: 70, fill: 'white', stroke: 'black' })
    
    
    var CrankAngle = Math.asin(crank * Math.cos(data.time) / shaft)
    var OppositeAngle = Math.PI - (CrankAngle + data.time);
    var Y = shaft * Math.cos(OppositeAngle) / Math.cos(data.time)
    
    // shaft
    ctx.line(Math.cos(data.time) * crank, Math.sin(data.time) * crank, 0, Y, {
        'stroke-width': 10,
        'stroke': 'gray',
        'stroke-linecap': 'round'
    })
    
    
    // crank
    ctx.line(0, 0, Math.cos(data.time) * crank, Math.sin(data.time) * crank, {
        'stroke-width': 40,
        'stroke': 'black',
        'stroke-linecap': 'round'
    })
    
    
    // piston
    ctx.line(0, Y, 0, Y - 70, {
        'stroke-width': 70,
        'stroke': 'gray',
    })   
}

var graphics = g9(initial, render)
    .insertInto('#demo-crank')

/*setInterval(function(){
    if(!graphics.isManipulating){
        var data = graphics.getData()
        data.time += 0.05
        graphics.setData(data)    
    }
}, 10)*/
</textarea>
    </div>
    <div class='display' id='demo-crank'></div>
</div> 





<div id='floating-box'></div>



<script src='https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/prism.min.js'></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.18.2/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.18.2/mode/javascript/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.18.2/keymap/sublime.min.js"></script>
<script src="../dist/g9.js"></script>
<script type="text/javascript" src='./gallery.js'></script>

<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

 ga('create', 'UA-83153710-2', 'auto');
 ga('send', 'pageview');

</script>

</body>
</html>